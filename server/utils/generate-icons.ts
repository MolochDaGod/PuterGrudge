import sharp from 'sharp';
import path from 'path';
import fs from 'fs';

interface IconConfig {
  name: string;
  svgPath: string;
  color1: string;
  color2: string;
  viewBox?: string;
}

// Real graphical SVG icons - actual symbols, NOT text letters
const icons: IconConfig[] = [
  // AI & Brain icons
  { name: 'ai-studio', svgPath: 'M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2M7.5 13A2.5 2.5 0 0 0 5 15.5A2.5 2.5 0 0 0 7.5 18a2.5 2.5 0 0 0 2.5-2.5A2.5 2.5 0 0 0 7.5 13m9 0a2.5 2.5 0 0 0-2.5 2.5a2.5 2.5 0 0 0 2.5 2.5a2.5 2.5 0 0 0 2.5-2.5a2.5 2.5 0 0 0-2.5-2.5', color1: '#8b5cf6', color2: '#00f5ff' },
  { name: 'ai-assistant', svgPath: 'M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2M7.5 13A2.5 2.5 0 0 0 5 15.5A2.5 2.5 0 0 0 7.5 18a2.5 2.5 0 0 0 2.5-2.5A2.5 2.5 0 0 0 7.5 13m9 0a2.5 2.5 0 0 0-2.5 2.5a2.5 2.5 0 0 0 2.5 2.5a2.5 2.5 0 0 0 2.5-2.5a2.5 2.5 0 0 0-2.5-2.5', color1: '#8b5cf6', color2: '#00f5ff' },
  { name: 'ai-subsystem', svgPath: 'M21.33 12.91c.09 1.55-.62 3.04-1.89 3.95l.77 1.49c.23.45.26.98.06 1.45-.19.47-.58.84-1.06 1l-.79.26a1.84 1.84 0 0 1-1.67-.28l-1.29-.97c-1.39.52-2.9.55-4.3.07l-1.29 1.01c-.46.36-1.07.46-1.63.28l-.78-.27c-.47-.16-.86-.52-1.06-.99s-.17-.99.06-1.45l.74-1.44c-1.31-.95-2.02-2.47-1.9-4.06.1-1.26.64-2.44 1.52-3.32l-.76-1.49c-.22-.45-.25-.98-.06-1.45.19-.47.58-.84 1.06-1l.78-.26c.56-.19 1.17-.08 1.63.28l1.01.77c1.63-.56 3.42-.48 5 .22l.97-.74c.46-.36 1.06-.46 1.63-.28l.78.26c.48.16.87.53 1.06 1 .2.47.17 1-.06 1.45l-.72 1.42c.88.9 1.4 2.08 1.45 3.33m-1.5.05a3.32 3.32 0 0 0-1.27-2.65c-.48-.4-.79-1-.84-1.64l.77-1.5-.78-.26-1.02.78c-.53.4-1.22.48-1.82.21a4.19 4.19 0 0 0-4.03.08c-.59.31-1.3.27-1.87-.11l-1.03-.78-.78.26.78 1.53c.18.61-.02 1.27-.53 1.73-.68.61-1.07 1.5-1.07 2.44 0 1.08.48 2.08 1.32 2.75.53.42.77 1.1.63 1.76l-.76 1.49.78.26 1.29-1.01a1.68 1.68 0 0 1 1.78-.16c1.16.57 2.5.57 3.66 0a1.7 1.7 0 0 1 1.81.2l1.27.96.78-.26-.77-1.52a1.73 1.73 0 0 1 .57-1.99c.75-.55 1.21-1.44 1.21-2.39M12 9c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3', color1: '#8b5cf6', color2: '#ff006e' },
  
  // Code & Terminal icons
  { name: 'code-studio', svgPath: 'M8 3a2 2 0 0 0-2 2v4a2 2 0 0 1-2 2H3v2h1a2 2 0 0 1 2 2v4a2 2 0 0 0 2 2h2v-2H8v-5a2 2 0 0 0-2-2 2 2 0 0 0 2-2V5h2V3H8m8 0a2 2 0 0 1 2 2v4a2 2 0 0 0 2 2h1v2h-1a2 2 0 0 0-2 2v4a2 2 0 0 1-2 2h-2v-2h2v-5a2 2 0 0 1 2-2 2 2 0 0 1-2-2V5h-2V3h2Z', color1: '#00ff88', color2: '#00f5ff' },
  { name: 'terminal', svgPath: 'M20 19V7H4v12h16m0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16m-7 14v-2h5v2h-5m-3.42-4L5.57 9H8.4l3.3 3.3c.39.39.39 1.03 0 1.42L8.42 17H5.59l4-4Z', color1: '#14b8a6', color2: '#00ff88' },
  { name: 'dev-tools', svgPath: 'M21.71 20.29l-1.42 1.42a1 1 0 0 1-1.41 0L7 9.85A3.81 3.81 0 0 1 6 10a4 4 0 0 1-3.78-5.3l2.54 2.54.53-.53 1.42-1.42.53-.53L4.7 2.22A4 4 0 0 1 10 6a3.81 3.81 0 0 1-.15 1l11.86 11.88a1 1 0 0 1 0 1.41M2.29 18.88a1 1 0 0 0 0 1.41l1.42 1.42a1 1 0 0 0 1.41 0l5.47-5.46-2.83-2.83M20 2l-4 2v2l-2.17 2.17 2 2L18 8h2l2-4Z', color1: '#ff6b00', color2: '#ff006e' },
  
  // Games & Entertainment
  { name: 'games-launcher', svgPath: 'M7.97 16 5 19c-1.5 1.5-3 1.5-3 1.5s0-1.5 1.5-3l3-2.97L6 14l9.31-9.31-1.42-1.42 1.42-1.41 3.54 3.54-1.42 1.41-1.41-1.42L6.71 16H7.97m6.13-8.22 1.42 1.41-.7.71-1.42-1.41.7-.71m2.83 2.83 1.41 1.41-.7.71-1.41-1.41.7-.71m-1.41-4.24-.71.7 1.41 1.42.71-.71-1.41-1.41Z', color1: '#ff006e', color2: '#8b5cf6' },
  
  // System icons
  { name: 'settings', svgPath: 'M12 15.5A3.5 3.5 0 0 1 8.5 12 3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97 0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1 0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z', color1: '#8b5cf6', color2: '#00f5ff' },
  { name: 'system-monitor', svgPath: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 17h-2v-2h2v2m2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25', color1: '#00ff88', color2: '#8b5cf6' },
  { name: 'task-manager', svgPath: 'M3 4h18v4H3V4m0 6h18v4H3v-4m0 6h18v4H3v-4m2-10v2h2V6H5m0 6v2h2v-2H5m0 6v2h2v-2H5Z', color1: '#8b5cf6', color2: '#ff006e' },
  { name: 'file-manager', svgPath: 'M10 4H4c-1.11 0-2 .89-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2Z', color1: '#22c55e', color2: '#00f5ff' },
  
  // Communication
  { name: 'grudge-chat', svgPath: 'M12 3c5.5 0 10 3.58 10 8s-4.5 8-10 8c-1.24 0-2.43-.18-3.53-.5C5.55 21 2 21 2 21c2.33-2.33 2.7-3.9 2.75-4.5C3.05 15.07 2 13.13 2 11c0-4.42 4.5-8 10-8m5 9v-2h-2v2h2m-4 0v-2h-2v2h2m-4 0v-2H7v2h2Z', color1: '#ec4899', color2: '#8b5cf6' },
  { name: 'channel-text', svgPath: 'M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m1 4v2h12V7H6m0 4v2h12v-2H6m0 4v2h8v-2H6Z', color1: '#00ff88', color2: '#00f5ff' },
  { name: 'channel-voice', svgPath: 'M12 2a3 3 0 0 1 3 3v6a3 3 0 0 1-3 3 3 3 0 0 1-3-3V5a3 3 0 0 1 3-3m7 9c0 3.53-2.61 6.44-6 6.93V21h-2v-3.07c-3.39-.49-6-3.4-6-6.93h2a5 5 0 0 0 5 5 5 5 0 0 0 5-5h2Z', color1: '#8b5cf6', color2: '#ff006e' },
  { name: 'channel-video', svgPath: 'M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4Z', color1: '#ff006e', color2: '#ff6b00' },
  { name: 'channel-stream', svgPath: 'M5 6H3v14a2 2 0 0 0 2 2h14v-2H5V6m16-4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h12m-8 12.5v-9l6 4.5-6 4.5Z', color1: '#ff006e', color2: '#8b5cf6' },
  
  // Audio & Media
  { name: 'audio-packages', svgPath: 'M14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.84-5 6.7v2.07c4-.91 7-4.49 7-8.77 0-4.28-3-7.86-7-8.77M16.5 12c0-1.77-1-3.29-2.5-4.03V16c1.5-.71 2.5-2.24 2.5-4M3 9v6h4l5 5V4L7 9H3Z', color1: '#00f5ff', color2: '#8b5cf6' },
  { name: 'mute', svgPath: 'M12 4 9.91 6.09 12 8.18M4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.26c-.67.51-1.42.93-2.25 1.17v2.07c1.38-.32 2.63-.95 3.68-1.81L19.73 21 21 19.73l-9-9M19 12c0 .94-.2 1.82-.54 2.64l1.51 1.51A8.8 8.8 0 0 0 21 12a9 9 0 0 0-7-8.77v2.06c2.89.86 5 3.54 5 6.71m-2.5 0a4.42 4.42 0 0 0-2.5-3.98v2.2l2.45 2.45c.03-.22.05-.44.05-.67Z', color1: '#ff006e', color2: '#8b5cf6' },
  { name: 'deafen', svgPath: 'M14.24 12.01 2.32 0l-1.05 1.06 4.42 4.42c-.27.35-.52.72-.74 1.11C4.33 7.57 4 8.78 4 10v2c0 1.39.27 2.64.73 3.74.4.96.97 1.83 1.69 2.57.31.32.66.61 1.02.87.32.23.66.43 1.01.63.23.12.45.25.69.35.23.1.46.21.7.29v.37c0 1.21.98 2.19 2.19 2.19 1.22-.01 2.19-.98 2.19-2.18v-.31c.21-.07.42-.15.63-.24l6.02 6.02 1.05-1.06-8.68-8.68m-4.41-3.74c.14-.13.28-.24.43-.36C10.73 7.67 11.34 7.5 12 7.5c1.66 0 3 1.34 3 3 0 .11-.02.21-.03.32l-5.14-5.55m4.05 9.29c-.22.07-.44.12-.66.16v-2.07c0-.43-.16-.82-.44-1.12l-5.95-6.41c.37-.18.77-.31 1.19-.38.84-.14 1.7 0 2.45.41.74.41 1.33.99 1.73 1.73.36.65.55 1.35.55 2.07v.37c-.01.22-.02.43-.06.64l-1.67-1.67c-.41.67-1.16 1.09-1.99 1.09H9c-.16 0-.32-.02-.48-.05l5.31 5.31c.03-.03.04-.05.05-.08M9 15.5H7v-1H5.5v-1H7V12H5.5v-1H9c.83 0 1.5.67 1.5 1.5v2c0 .83-.67 1.5-1.5 1.5', color1: '#00ff88', color2: '#00f5ff' },
  { name: 'camera', svgPath: 'M4 4h3l2-2h6l2 2h3a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2m8 3a5 5 0 0 0-5 5 5 5 0 0 0 5 5 5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3Z', color1: '#ff006e', color2: '#ff6b00' },
  { name: 'screen-share', svgPath: 'M21 3H3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2m0 16H3V5h18v14m-5-7 4 4h-3v2h-2v-2h-3l4-4m-6 0-4-4h3V6h2v2h3l-4 4Z', color1: '#8b5cf6', color2: '#00f5ff' },
  
  // Network & System
  { name: 'network', svgPath: 'M17 3a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-4v2h1a1 1 0 0 1 1 1h4v2h-4a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1H5v-2h4a1 1 0 0 1 1-1h1v-2H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10m0 2H7v6h10V5m-8 2v2h2V7H9m4 0v2h2V7h-2Z', color1: '#00f5ff', color2: '#00ff88' },
  { name: 'network-tools', svgPath: 'M17 3a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-4v2h1a1 1 0 0 1 1 1h4v2h-4a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1H5v-2h4a1 1 0 0 1 1-1h1v-2H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10m0 2H7v6h10V5m-8 2v2h2V7H9m4 0v2h2V7h-2Z', color1: '#00f5ff', color2: '#00ff88' },
  { name: 'cpu', svgPath: 'M6 4h12v1h1v1h2v2h-2v2h2v2h-2v2h2v2h-2v1h-1v1H6v-1H5v-1H3v-2h2v-2H3v-2h2V8H3V6h2V5h1V4m0 4v8h12V8H6m2 2h8v4H8v-4Z', color1: '#ff006e', color2: '#ff6b00' },
  { name: 'memory', svgPath: 'M2 7h1v2h-1c-.55 0-1-.45-1-1s.45-1 1-1m2 0h18v10H4V7m2 2v6h14V9H6m14-2h1a1 1 0 0 1 1 1 1 1 0 0 1-1 1h-1V7m1 4a1 1 0 0 1 1 1 1 1 0 0 1-1 1h-1v-2h1m0 4a1 1 0 0 1 1 1 1 1 0 0 1-1 1h-1v-2h1M2 11h1v2H2c-.55 0-1-.45-1-1s.45-1 1-1m0 4h1v2H2c-.55 0-1-.45-1-1s.45-1 1-1Z', color1: '#00ff88', color2: '#8b5cf6' },
  { name: 'storage', svgPath: 'M2 20h20v-4H2v4m4-2h-2v-2h2v2m0-6H4v-2h2v2m-2 2h20V8H2v6m4-4h-2v-2h2v2M2 4v4h20V4H2Z', color1: '#00f5ff', color2: '#8b5cf6' },
  
  // Compute & WASM
  { name: 'compute-pods', svgPath: 'M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H5V5h14v14M7 7h4v4H7V7m0 6h4v4H7v-4m6-6h4v4h-4V7m0 6h4v4h-4v-4Z', color1: '#00ff88', color2: '#3b82f6' },
  { name: 'wasm-runner', svgPath: 'M12 16a3 3 0 0 1-3-3c0-1.12.61-2.1 1.5-2.61l9.71-5.62-5.53 9.58c-.5.98-1.51 1.65-2.68 1.65m0-13c1.81 0 3.5.5 4.97 1.32l-2.1 1.21C14 5.19 13 5 12 5a8 8 0 0 0-8 8c0 2.21.89 4.21 2.34 5.65h.01c.39.39.39 1.02 0 1.41-.39.39-1.03.39-1.42.01A9.969 9.969 0 0 1 2 13c0-5.5 4.5-10 10-10m10 10c0 2.76-1.12 5.26-2.93 7.07-.39.38-1.02.38-1.41-.01a.996.996 0 0 1 0-1.41A7.95 7.95 0 0 0 20 13c0-1-.19-2-.54-2.9L20.67 8C21.5 9.5 22 11.18 22 13Z', color1: '#ff006e', color2: '#ff6b00' },
  
  // Agents & Swarm
  { name: 'agent-swarm', svgPath: 'M12 5.5A3.5 3.5 0 0 1 15.5 9a3.5 3.5 0 0 1-3.5 3.5A3.5 3.5 0 0 1 8.5 9 3.5 3.5 0 0 1 12 5.5M5 8c.56 0 1.08.15 1.53.42-.15 1.43.27 2.85 1.13 3.96C7.16 13.34 6.16 14 5 14a3 3 0 0 1-3-3 3 3 0 0 1 3-3m14 0a3 3 0 0 1 3 3 3 3 0 0 1-3 3c-1.16 0-2.16-.66-2.66-1.62a5.536 5.536 0 0 0 1.13-3.96c.45-.27.97-.42 1.53-.42M5.5 18.25c0-2.07 2.91-3.75 6.5-3.75s6.5 1.68 6.5 3.75V20h-13v-1.75M0 20v-1.5c0-1.39 1.89-2.56 4.45-2.9-.59.68-.95 1.62-.95 2.65V20H0m24 0h-3.5v-1.75c0-1.03-.36-1.97-.95-2.65 2.56.34 4.45 1.51 4.45 2.9V20Z', color1: '#8b5cf6', color2: '#ff006e' },
  { name: 'agent-manager', svgPath: 'M12 5.5A3.5 3.5 0 0 1 15.5 9a3.5 3.5 0 0 1-3.5 3.5A3.5 3.5 0 0 1 8.5 9 3.5 3.5 0 0 1 12 5.5M5 8c.56 0 1.08.15 1.53.42-.15 1.43.27 2.85 1.13 3.96C7.16 13.34 6.16 14 5 14a3 3 0 0 1-3-3 3 3 0 0 1 3-3m14 0a3 3 0 0 1 3 3 3 3 0 0 1-3 3c-1.16 0-2.16-.66-2.66-1.62a5.536 5.536 0 0 0 1.13-3.96c.45-.27.97-.42 1.53-.42M5.5 18.25c0-2.07 2.91-3.75 6.5-3.75s6.5 1.68 6.5 3.75V20h-13v-1.75M0 20v-1.5c0-1.39 1.89-2.56 4.45-2.9-.59.68-.95 1.62-.95 2.65V20H0m24 0h-3.5v-1.75c0-1.03-.36-1.97-.95-2.65 2.56.34 4.45 1.51 4.45 2.9V20Z', color1: '#a855f7', color2: '#00f5ff' },
  { name: 'agent-collab', svgPath: 'M16 17v2H2v-2s0-4 7-4 7 4 7 4m-3.5-9.5A3.5 3.5 0 1 0 9 11a3.5 3.5 0 0 0 3.5-3.5m3.44 5.5A5.32 5.32 0 0 1 18 17v2h4v-2s0-3.63-6.06-4M15 4a3.39 3.39 0 0 0-1.93.59 5 5 0 0 1 0 5.82A3.39 3.39 0 0 0 15 11a3.5 3.5 0 0 0 0-7Z', color1: '#00f5ff', color2: '#8b5cf6' },
  { name: 'observer', svgPath: 'M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z', color1: '#14b8a6', color2: '#8b5cf6' },
  
  // Action icons
  { name: 'deploy', svgPath: 'M19.36 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.64-4.96M14 13v4h-4v-4H7l5-5 5 5h-3Z', color1: '#3b82f6', color2: '#00f5ff' },
  { name: 'search', svgPath: 'M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z', color1: '#00f5ff', color2: '#8b5cf6' },
  { name: 'pin', svgPath: 'M16 12V4h1V2H7v2h1v8l-2 2v2h5.2v6h1.6v-6H18v-2l-2-2Z', color1: '#ff006e', color2: '#ff6b00' },
  { name: 'members', svgPath: 'M16 17v2H2v-2s0-4 7-4 7 4 7 4m-3.5-9.5A3.5 3.5 0 1 0 9 11a3.5 3.5 0 0 0 3.5-3.5m3.44 5.5A5.32 5.32 0 0 1 18 17v2h4v-2s0-3.63-6.06-4M15 4a3.39 3.39 0 0 0-1.93.59 5 5 0 0 1 0 5.82A3.39 3.39 0 0 0 15 11a3.5 3.5 0 0 0 0-7Z', color1: '#00f5ff', color2: '#8b5cf6' },
  { name: 'sign-out', svgPath: 'M16 17v-3H9v-4h7V7l5 5-5 5M14 2a2 2 0 0 1 2 2v2h-2V4H5v16h9v-2h2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9Z', color1: '#ff006e', color2: '#ff6b00' },
  { name: 'sign-in', svgPath: 'M10 17v-3h7v-4h-7V7l-5 5 5 5m4-15a2 2 0 0 0-2 2v2h2V4h9v16h-9v-2h-2v2a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-9Z', color1: '#00ff88', color2: '#00f5ff' },
  { name: 'disconnect', svgPath: 'M14.88 14.88 17 17a6.5 6.5 0 0 1-.14.13L19 19.27 17.73 20.54l-2.14-2.14a6.49 6.49 0 0 1-.54.35l.83 3.25H13.3l-.64-2.56a6.5 6.5 0 0 1-1.3 0l-.66 2.56H8.12l.83-3.25A6.5 6.5 0 0 1 5.5 12c0-.18 0-.36.03-.53L4 10.95l.54-1.87 1.53.44A6.5 6.5 0 0 1 7 8.5l-1.22-1.22L7 6.05l1.22 1.22a6.5 6.5 0 0 1 .92-.59l-.44-1.54L10.57 4.6l.44 1.53A6.5 6.5 0 0 1 12 6a6.5 6.5 0 0 1 1 .08l.44-1.55 1.87.54-.44 1.54c.34.17.65.37.94.59l1.22-1.2L18.27 7.27l-.23.23 1.23 1.23-.23.23.85.85A6.5 6.5 0 0 1 18.5 12c0 1.13-.29 2.19-.79 3.12M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4Z', color1: '#ff006e', color2: '#8b5cf6' },
  
  // Status icons
  { name: 'online', svgPath: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9Z', color1: '#00ff88', color2: '#00f5ff' },
  { name: 'offline', svgPath: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31A7.902 7.902 0 0 1 12 20m6.31-3.1L7.1 5.69A7.902 7.902 0 0 1 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9Z', color1: '#ff006e', color2: '#8b5cf6' },
  { name: 'success', svgPath: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9Z', color1: '#00ff88', color2: '#00f5ff' },
  
  // Categories
  { name: 'category-apps', svgPath: 'M4 4h4v4H4V4m6 0h4v4h-4V4m6 0h4v4h-4V4M4 10h4v4H4v-4m6 0h4v4h-4v-4m6 0h4v4h-4v-4M4 16h4v4H4v-4m6 0h4v4h-4v-4m6 0h4v4h-4v-4Z', color1: '#8b5cf6', color2: '#00f5ff' },
  { name: 'category-channels', svgPath: 'M12 3c5.5 0 10 3.58 10 8s-4.5 8-10 8c-1.24 0-2.43-.18-3.53-.5C5.55 21 2 21 2 21c2.33-2.33 2.7-3.9 2.75-4.5C3.05 15.07 2 13.13 2 11c0-4.42 4.5-8 10-8Z', color1: '#00f5ff', color2: '#00ff88' },
  { name: 'category-general', svgPath: 'M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2Z', color1: '#00f5ff', color2: '#8b5cf6' },
  { name: 'category-dev', svgPath: 'M8 3a2 2 0 0 0-2 2v4a2 2 0 0 1-2 2H3v2h1a2 2 0 0 1 2 2v4a2 2 0 0 0 2 2h2v-2H8v-5a2 2 0 0 0-2-2 2 2 0 0 0 2-2V5h2V3H8m8 0a2 2 0 0 1 2 2v4a2 2 0 0 0 2 2h1v2h-1a2 2 0 0 0-2 2v4a2 2 0 0 1-2 2h-2v-2h2v-5a2 2 0 0 1 2-2 2 2 0 0 1-2-2V5h-2V3h2Z', color1: '#8b5cf6', color2: '#00f5ff' },
  { name: 'category-ai', svgPath: 'M21.33 12.91c.09 1.55-.62 3.04-1.89 3.95l.77 1.49c.23.45.26.98.06 1.45-.19.47-.58.84-1.06 1l-.79.26a1.84 1.84 0 0 1-1.67-.28l-1.29-.97c-1.39.52-2.9.55-4.3.07l-1.29 1.01c-.46.36-1.07.46-1.63.28l-.78-.27c-.47-.16-.86-.52-1.06-.99s-.17-.99.06-1.45l.74-1.44c-1.31-.95-2.02-2.47-1.9-4.06.1-1.26.64-2.44 1.52-3.32l-.76-1.49c-.22-.45-.25-.98-.06-1.45.19-.47.58-.84 1.06-1l.78-.26c.56-.19 1.17-.08 1.63.28l1.01.77c1.63-.56 3.42-.48 5 .22l.97-.74c.46-.36 1.06-.46 1.63-.28l.78.26c.48.16.87.53 1.06 1 .2.47.17 1-.06 1.45l-.72 1.42c.88.9 1.4 2.08 1.45 3.33m-1.5.05a3.32 3.32 0 0 0-1.27-2.65c-.48-.4-.79-1-.84-1.64l.77-1.5-.78-.26-1.02.78c-.53.4-1.22.48-1.82.21a4.19 4.19 0 0 0-4.03.08c-.59.31-1.3.27-1.87-.11l-1.03-.78-.78.26.78 1.53c.18.61-.02 1.27-.53 1.73-.68.61-1.07 1.5-1.07 2.44 0 1.08.48 2.08 1.32 2.75.53.42.77 1.1.63 1.76l-.76 1.49.78.26 1.29-1.01a1.68 1.68 0 0 1 1.78-.16c1.16.57 2.5.57 3.66 0a1.7 1.7 0 0 1 1.81.2l1.27.96.78-.26-.77-1.52a1.73 1.73 0 0 1 .57-1.99c.75-.55 1.21-1.44 1.21-2.39M12 9c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3', color1: '#8b5cf6', color2: '#ff006e' },
  { name: 'category-streaming', svgPath: 'M5 6H3v14a2 2 0 0 0 2 2h14v-2H5V6m16-4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h12m-8 12.5v-9l6 4.5-6 4.5Z', color1: '#ff006e', color2: '#ff6b00' },
  
  // User & Avatar
  { name: 'user-avatar', svgPath: 'M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4Z', color1: '#00f5ff', color2: '#00ff88' },
  { name: 'guest-avatar', svgPath: 'M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4Z', color1: '#00f5ff', color2: '#8b5cf6' },
  
  // Misc
  { name: 'grd-compress', svgPath: 'M21.71 11.29l-9-9a.996.996 0 0 0-1.41 0l-9 9a.996.996 0 0 0 0 1.41l9 9c.39.39 1.02.39 1.41 0l9-9a.996.996 0 0 0 0-1.41M14 14.5V12h-4v3H8v-4c0-.55.45-1 1-1h5V7.5l3.5 3.5-3.5 3.5Z', color1: '#3b82f6', color2: '#00f5ff' },
  { name: 'grd-compression', svgPath: 'M21.71 11.29l-9-9a.996.996 0 0 0-1.41 0l-9 9a.996.996 0 0 0 0 1.41l9 9c.39.39 1.02.39 1.41 0l9-9a.996.996 0 0 0 0-1.41M14 14.5V12h-4v3H8v-4c0-.55.45-1 1-1h5V7.5l3.5 3.5-3.5 3.5Z', color1: '#3b82f6', color2: '#00f5ff' },
  { name: 'system-overview', svgPath: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 17h-2v-2h2v2m2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25', color1: '#8b5cf6', color2: '#00f5ff' },
  { name: 'learning', svgPath: 'M12 3 1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3m6.82 6L12 12.72 5.18 9 12 5.28 18.82 9M17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72Z', color1: '#00ff88', color2: '#8b5cf6' },
  { name: 'creating', svgPath: 'M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2Z', color1: '#8b5cf6', color2: '#00f5ff' },
  { name: 'repeating', svgPath: 'M17 17H7v-3l-4 4 4 4v-3h12v-6h-2M7 7h10v3l4-4-4-4v3H5v6h2V7Z', color1: '#00f5ff', color2: '#00ff88' },
  { name: 'reiterating', svgPath: 'M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8A5.87 5.87 0 0 1 6 12c0-3.31 2.69-6 6-6m6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26Z', color1: '#ff006e', color2: '#8b5cf6' },
  { name: 'succeeding', svgPath: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9Z', color1: '#00ff88', color2: '#00f5ff' },
  { name: 'grudchat', svgPath: 'M12 3c5.5 0 10 3.58 10 8s-4.5 8-10 8c-1.24 0-2.43-.18-3.53-.5C5.55 21 2 21 2 21c2.33-2.33 2.7-3.9 2.75-4.5C3.05 15.07 2 13.13 2 11c0-4.42 4.5-8 10-8m5 9v-2h-2v2h2m-4 0v-2h-2v2h2m-4 0v-2H7v2h2Z', color1: '#8b5cf6', color2: '#ff006e' },
  
  // Additional missing icons
  { name: 'canvas', svgPath: 'M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H5V5h14v14m-5.04-6.71l-2.75 3.54-1.96-2.36L6.5 17h11l-3.54-4.71Z', color1: '#8b5cf6', color2: '#00f5ff' },
  { name: 'snapshots', svgPath: 'M4 4h3l2-2h6l2 2h3a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2m8 3a5 5 0 0 0-5 5 5 5 0 0 0 5 5 5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3Z', color1: '#00f5ff', color2: '#8b5cf6' },
  { name: 'art-agent', svgPath: 'M12 22C6.49 22 2 17.51 2 12S6.49 2 12 2s10 4.04 10 9c0 3.31-2.69 6-6 6h-1.77c-.28 0-.5.22-.5.5 0 .12.05.23.13.33.41.47.64 1.06.64 1.67A2.5 2.5 0 0 1 12 22m0-18c-4.41 0-8 3.59-8 8s3.59 8 8 8c.28 0 .5-.22.5-.5a.54.54 0 0 0-.14-.35c-.41-.46-.63-1.05-.63-1.65a2.5 2.5 0 0 1 2.5-2.5H16c2.21 0 4-1.79 4-4 0-3.86-3.59-7-8-7m-5.5 9A1.5 1.5 0 0 1 5 11.5 1.5 1.5 0 0 1 6.5 10 1.5 1.5 0 0 1 8 11.5 1.5 1.5 0 0 1 6.5 13m3-4A1.5 1.5 0 0 1 8 7.5 1.5 1.5 0 0 1 9.5 6 1.5 1.5 0 0 1 11 7.5 1.5 1.5 0 0 1 9.5 9m5 0A1.5 1.5 0 0 1 13 7.5 1.5 1.5 0 0 1 14.5 6 1.5 1.5 0 0 1 16 7.5 1.5 1.5 0 0 1 14.5 9m3 4A1.5 1.5 0 0 1 16 11.5a1.5 1.5 0 0 1 1.5-1.5 1.5 1.5 0 0 1 1.5 1.5 1.5 1.5 0 0 1-1.5 1.5Z', color1: '#ff006e', color2: '#ff6b00' },
  { name: 'orchestrator', svgPath: 'M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m0 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8m-1 3v6l5.25 3.15.75-1.23-4.5-2.67V7h-1.5Z', color1: '#8b5cf6', color2: '#00f5ff' },
  { name: 'code-agent', svgPath: 'M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2m-4 11l-2 2 2 2 1-1-1-1 1-1-1-1m8 0l-1 1 1 1-1 1 1 1 2-2-2-2m-5.27.21l-1.46.41.82 2.97 1.46-.41-.82-2.97Z', color1: '#00ff88', color2: '#00f5ff' },
  { name: 'live-stream', svgPath: 'M5 6H3v14a2 2 0 0 0 2 2h14v-2H5V6m16-4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h12m-8 12.5v-9l6 4.5-6 4.5Z', color1: '#ff006e', color2: '#8b5cf6' },
  { name: 'audio', svgPath: 'M14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.84-5 6.7v2.07c4-.91 7-4.49 7-8.77 0-4.28-3-7.86-7-8.77M16.5 12c0-1.77-1-3.29-2.5-4.03V16c1.5-.71 2.5-2.24 2.5-4M3 9v6h4l5 5V4L7 9H3Z', color1: '#00f5ff', color2: '#8b5cf6' },
  { name: 'agent-squad', svgPath: 'M16 17v2H2v-2s0-4 7-4 7 4 7 4m-3.5-9.5A3.5 3.5 0 1 0 9 11a3.5 3.5 0 0 0 3.5-3.5m3.44 5.5A5.32 5.32 0 0 1 18 17v2h4v-2s0-3.63-6.06-4M15 4a3.39 3.39 0 0 0-1.93.59 5 5 0 0 1 0 5.82A3.39 3.39 0 0 0 15 11a3.5 3.5 0 0 0 0-7Z', color1: '#8b5cf6', color2: '#ff006e' },
  { name: 'game-editor', svgPath: 'M7.97 16 5 19c-1.5 1.5-3 1.5-3 1.5s0-1.5 1.5-3l3-2.97L6 14l9.31-9.31-1.42-1.42 1.42-1.41 3.54 3.54-1.42 1.41-1.41-1.42L6.71 16H7.97m6.13-8.22 1.42 1.41-.7.71-1.42-1.41.7-.71m2.83 2.83 1.41 1.41-.7.71-1.41-1.41.7-.71Z', color1: '#ff006e', color2: '#8b5cf6' },
  // ZeroTier VPN network icon (globe with network connections)
  { name: 'zerotier', svgPath: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93m6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39', color1: '#ffb900', color2: '#00f5ff' },
];

function hexToRgb(hex: string): { r: number; g: number; b: number } {
  const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
  return result ? {
    r: parseInt(result[1], 16),
    g: parseInt(result[2], 16),
    b: parseInt(result[3], 16)
  } : { r: 139, g: 92, b: 246 };
}

async function generateIcon(config: IconConfig, size: number = 32): Promise<Buffer> {
  const c1 = hexToRgb(config.color1);
  const c2 = hexToRgb(config.color2);
  const viewBox = config.viewBox || '0 0 24 24';
  
  const svg = `
    <svg width="${size}" height="${size}" viewBox="${viewBox}" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:rgb(${c1.r},${c1.g},${c1.b});stop-opacity:1" />
          <stop offset="100%" style="stop-color:rgb(${c2.r},${c2.g},${c2.b});stop-opacity:1" />
        </linearGradient>
        <filter id="glow">
          <feGaussianBlur stdDeviation="0.5" result="coloredBlur"/>
          <feMerge>
            <feMergeNode in="coloredBlur"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
      </defs>
      <path d="${config.svgPath}" fill="url(#grad)" filter="url(#glow)"/>
    </svg>
  `;

  return sharp(Buffer.from(svg))
    .png({ quality: 80, compressionLevel: 9 })
    .toBuffer();
}

export async function generateAllIcons(): Promise<void> {
  const outputDir = path.join(process.cwd(), 'public/grudgeos/assets/icons/generated');
  
  if (!fs.existsSync(outputDir)) {
    fs.mkdirSync(outputDir, { recursive: true });
  }

  console.log(`[IconGen] Generating ${icons.length} real graphical icons...`);

  for (const icon of icons) {
    try {
      const buffer = await generateIcon(icon, 32);
      const outputPath = path.join(outputDir, `${icon.name}.png`);
      fs.writeFileSync(outputPath, buffer);
      const sizeKB = (buffer.length / 1024).toFixed(2);
      console.log(`[IconGen] ${icon.name}.png - ${sizeKB} KB`);
    } catch (error) {
      console.error(`[IconGen] Failed to generate ${icon.name}:`, error);
    }
  }

  console.log('[IconGen] All graphical icons generated!');
}

// Run if executed directly
generateAllIcons().catch(console.error);
